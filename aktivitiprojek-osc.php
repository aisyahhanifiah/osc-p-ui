<?php include "header-atd.php" ?>
<?php include "sidebar-atd.php" ?>

<div class="page-wrapper">
  <div class="container-fluid">
                  <h3 class="big-word mb-3">Aktiviti (MPKJ-KM20201006-004)</h3>

      <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="dashboard-osc.php"><i class="uil uil-home"></i>Laman Utama</a></li>
          <li class="breadcrumb-item"><a href="senaraiprojek-osc.php">Senarai Projek</a></li>
          <li class="breadcrumb-item"><a href="maklumatprojek-osc.php">Butiran</a></li>
          <li class="breadcrumb-item active">Senarai Aktiviti</li>
      </ol>

      <section class="content">
          <div class="row">
              <div class="col-md-12">
                  <div class="panel-group">
                      <div class="panel panel-default">
                          <div class="card">
                              <div class="panel-heading ml-2 mt-2">
                                  <h4 class="panel-title">
                                      <span style="text-decoration: underline">Senarai Aktiviti</span>
                                  </h4>
                              </div>
                              <div id="general" class="panel-collapse collapse show">
                                  <div class="panel-body">
                                      <div class="alert alert-secondary">
                                          <table id="activities" class="table table-bordered table-striped dataTable no-footer">
                                          <thead style="background-color: #03A9F4">
                                          <tr>
                                              <th width="16%" class="text-center sorting_disabled">Tarikh &amp; Masa</th>
                                              <th class="text-center sorting_disabled">Aktiviti</th>
                                              <th width="20%" class="text-center sorting_disabled">Tindakan Oleh</th>
                                              
                                              <th width="4%" class="text-center sorting_disabled">Nota</th>
                                              <th width="9%" class="text-center sorting_disabled">Lampiran</th>
                                              <!-- <th width="4%" class="text-center"><i class="fa fa-trash-alt" title="Buang aktiviti ini?"></i></th> -->
                                          </tr>
                                          </thead>
                                          <tbody>
                                                                                      <tr>
                                                  <td class="text-center"><23-11-2020 11:17 AM</td>
                                                  <td>Notis Pemeriksaan I</td>
                                                  <td class="text-center">
                                                                                                              Pegawai OSC MPKj
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                      </td>
                                                  <!-- <td class="text-center">
                                                                                                      </td> -->
                                              </tr>
                                              <tr>
                                                  <td class="text-center"><div style="display:none">20201006 11:17:00</div>06-10-2020 11:17 AM</td>
                                                  <td>Notis mula kerja dikeluarkan</td>
                                                  <td class="text-center">
                                                                                                              Pegawai OSC MPKj
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                      </td>
                                                  <!-- <td class="text-center">
                                                                                                      </td> -->
                                              </tr>
                                                                                      <tr>
                                                  <td class="text-center"><div style="display:none">20201006 11:00:00</div>06-10-2020 11:00 AM</td>
                                                  <td>
                                                                                                              Maklumat Tindakan OSC (Tiada Perubahan) Dikemaskini
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                              Pegawai OSC MPKj
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                      </td>
                                                  <!-- <td class="text-center">
                                                                                                      </td> -->
                                              </tr>
                                                                                      <tr>
                                                  <td class="text-center"><div style="display:none">20201006 10:34:00</div>06-10-2020 10:34 AM</td>
                                                  <td>
                                                                                                              Projek Lengkap Di Terima OSC
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                              Pegawai OSC MPKj
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                      </td>
                                                  <!-- <td class="text-center">
                                                                                                      </td> -->
                                              </tr>
                                                                                      <tr>
                                                  <td class="text-center"><div style="display:none">20201006 10:33:00</div>06-10-2020 10:33 AM</td>
                                                  <td>
                                                                                                              Pendaftaran Projek Baru Atas Talian Selesai Oleh Pegawai OSC MPKj
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                              
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                      </td>
                                                  <td class="text-center">
                                                                                                      </td>
                                                  <!-- <td class="text-center">
                                                                                                      </td> -->
                                              </tr>
                                          
                                          </tbody>
                                      </table>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
                  <div class="row">
              <div class="col-md-12">
                  <div class="card">
                  <div class="panel-group">
                      <div class="panel panel-default">
                          <div class="panel-heading ml-2 mt-2">
                              <h4 class="panel-title">
                                  <span style="text-decoration: underline">Daftar Aktiviti</span>
                              </h4>
                          </div>
                          <div id="register" class="panel-collapse collapse show">
                              <div class="panel-body">

                                      <div class="alert alert-secondary">
                                          <form method="POST" action="/staff/submissions/activity/16836/create" enctype="multipart/form-data">
                                              <input type="hidden" name="_token" value="239QP6fg40HoaOqtrRjIihktXjW27HqrslNSoj8E">                                            <div class="col-md-8 offset-md-2">
                                                  <div class="form-group row">
                                                      <label for="" class="control-label col-form-label col-md-4">Sila Pilih Aktiviti</label>
                                                      <div class="col-md-8">
                                                          <select class="form-control" id="activity_id" name="activity_type_id" required="">
                                                            <option value="61|1">Notis Ketidakpatuhan dikeluarkan</option>
                                                            <option value="100|1">Notis Kepatuhan dikeluarkan</option>
                                                            <option value="225|1">Kertas Perakuan dikeluarkan</option>
                                                            
                                                            <option value="3007|1">Lanjutan Tempoh Pematuhan Arahan Bertulis</option>
                                                            <option value="3008|1">Penarikbalikan dan Pembatalan Projek</option>
                                                            <option value="3011|1">Permohonan Perlanjutan Tempoh Masa Bekerja</option>
                                                            <option value="3012|1">Notis Mula Kerja</option>
                                                            <option value="3014|1">Surat Rayuan Lanjutan Tempoh Rayuan</option>
                                                            <option value="3015|1">Laporan Pemeriksaan Tapak CCC</option>
                                                            <option value="3016|1">Surat Kompaun</option>
                                                            <option value="3016|1">Notis Penahanan Keluar CCC</option>
                                                            <option value="100000|1">Lain-lain Aktiviti/Dokumen</option>
                                                    </select>
                                            </div>
                                                  </div>
                                                  <div class="form-group row" id="activity_name" style="display:none">
                                                      <label for="params" class="control-label col-form-label col-md-4">Nama Aktiviti/Dokumen</label>
                                                      <div class="date col-md-8">
                                                          <input type="text" name="params" id="params" class="form-control" value="" disabled="" required="">
                                                      </div>
                                                                                                      </div>
                                                  <div class="form-group row">
                                                      <label for="" class="control-label col-form-label col-md-4">Tarikh &amp; Masa</label>
                                                      <div class="col-md-6" id="">
                                                          <input type="text" name="activity_datetime" class="form-control datetimepicker" value="" required="">

                                                      </div>
                                                                                                      </div>
                                                  <div class="form-group row">
                                                      <label for="" class="control-label col-form-label col-md-4">Nota (Jika Perlu)</label>
                                                      <div class="col-md-8" id="">
                                                      <textarea class="form-control" rows="5" name="note"></textarea>
                                                      </div>
                                              </div>
                                                  <div class="form-group row" id="attachment_div">
                                                      <label for="" class="control-label col-form-label col-md-4">Lampiran (Jika Perlu)</label>
                                                      <div class="col-md-8">
                                                          <input type="file" accept=".pdf, .PDF" name="attachment" id="attachment">
                                                      </div>
                                                  </div>
                                                  <div class="form-group row" id="attachment_type" style="padding-bottom: 50px">
                                                      <label for="" class="control-label col-form-label col-md-3">&nbsp;</label>
                                                      <div class="col-md-9">
                                                          <label for="" class="control-label">Hanya fail dari format pdf dibenarkan. Saiz maksima fail dimuatnaik adalah 10MB</label>
                                                      </div>
                                                  </div>
                                                  <div class="col-md-12 text-center">
                                                      <input type="submit" class="btn btn-primary" style="width: 200px" value="Daftar">
                                                  </div>
                                              </div>
                                          </form>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
              </section>
      <div id="noteModal" class="modal fade" role="dialog" aria-hidden="true" aria-modal="true" aria-labelledby="mynoteModalLabel">
          <div class="modal-dialog modal-lg">
              <!-- Modal content-->
              <div class="modal-content">
                  <div class="modal-header">
                      <h4 class="modal-title">Nota</h4>
                  </div>
                  <div class="modal-body">
                      <div id="note-body"></div>
                  </div>
              </div>
          </div>
      </div>

          </div>
    <footer class="footer text-center" style="display:none">
      Dibangunkan bersama oleh Perbadanan Putrajaya dan <a href="https://basicinception.com" style="color:#fff">Basic Inception</a>.
    </footer>    

</div>


<script src="js/app.js?id=6d4f7650cf88c1a97d34"></script>
<script src="js/theme.js"></script>
<script src="js/resumable.js"></script>
<script src="js/form-manipulation.js"></script>
<script src="js/calculate-field.js?v=1.1"></script>
<script src="js/bootbox.min.js"></script>
<script src="plugins/daterangepicker/moment.min.js"></script>
<script src="js/bootstrap-datetimepicker.js"></script>
<script src="plugins/daterangepicker/daterangepicker.js"></script>
<script>
    // Configure/customize these variables.
    var showChar = 180; // How many characters are shown by default
    var ellipsestext = "...";
    var moretext = "Info penuh >";
    var lesstext = "Info kurang";

    $('.more').each(function () {
      var content = $(this).html();

      if (content.length > showChar) {

        var c = content.substr(0, showChar);
        var h = content.substr(showChar, content.length - showChar);

        var html = c + '<span class="moreellipses">' + ellipsestext + '&nbsp;</span><span class="morecontent"><span>' + h + '</span>&nbsp;&nbsp;<a href="" class="morelink no-loading">' + moretext + '</a></span>';

        $(this).html(html);
      }
    });

    $(".morelink").click(function () {
      if ($(this).hasClass("less")) {
        $(this).removeClass("less");
        $(this).html(moretext);
      } else {
        $(this).addClass("less");
        $(this).html(lesstext);
      }
      $(this).parent().prev().toggle();
      $(this).prev().toggle();
      return false;
    });

    // Configure/customize these variables.
    var showChar2 = 200; // How many characters are shown by default
    var ellipsestext2 = "...";
    var moretext2 = "Info penuh >";
    var lesstext2 = "Info kurang";

    $('.more2').each(function () {
      var content = $(this).html();

      if (content.length > showChar2) {

        var c = content.substr(0, showChar2);
        var h = content.substr(showChar2, content.length - showChar2);

        var html = c + '<span class="moreellipses">' + ellipsestext2 + '&nbsp;</span><span class="morecontent"><span>' + h + '</span>&nbsp;&nbsp;<a href="" class="morelink2 no-loading">' + moretext2 + '</a></span>';

        $(this).html(html);
      }
    });

    $(".morelink2").click(function () {
      if ($(this).hasClass("less")) {
        $(this).removeClass("less");
        $(this).html(moretext2);
      } else {
        $(this).addClass("less");
        $(this).html(lesstext2);
      }
      $(this).parent().prev().toggle();
      $(this).prev().toggle();
      return false;
    });
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var inputs = document.getElementsByTagName("INPUT");
      var selects = document.getElementsByTagName("SELECT");
      for (var i = 0; i < inputs.length; i++) {
        inputs[i].oninvalid = function(e) {
          e.target.setCustomValidity("");
          if (!e.target.validity.valid) {
            e.target.setCustomValidity("Isi maklumat yang betul di kotak ini.");
          }
        };
        inputs[i].oninput = function(e) {
          e.target.setCustomValidity("");
        };
      }

      for (var i = 0; i < selects.length; i++) {
        selects[i].oninvalid = function(e) {
          e.target.setCustomValidity("");
          if (!e.target.validity.valid) {
            e.target.setCustomValidity("Sila buat pilihan dari senarai ini.");
          }
        };
        selects[i].oninput = function(e) {
          e.target.setCustomValidity("");
        };
      }
    })
    $('#datatable').dataTable({
      "lengthMenu": [[10, 50, 100, -1], [10, 50, 100, "All"]],
      "pageLength": 50,
      "aaSorting": []
    });
    $('[data-toggle="tooltip"]').tooltip();
    $(".preloader").fadeOut();
    $(".select2").select2();
    $("#fontplus").click(function () {
      var fontSize = parseInt($('body').css("font-size"));
      fontSize = fontSize + 1 + "px";
      $('body').css({
        'font-size': fontSize
      });
    });
    $("#fontminus").click(function () {
      var fontSize = parseInt($('body').css("font-size"));
      fontSize = fontSize - 1 + "px";
      $('body').css({
        'font-size': fontSize
      });
    });
    $("#fontdefault").click(function () {
      var fontSize = parseInt($('body').css("font-size"));
      fontSize = fontSize - 1 + "px";
      $('body').css({
        'font-size': ''
      });
    });

    $('.datetimepicker').datetimepicker({
      stepping:1,
      format: 'DD-MM-YYYY HH:mm',
      maxDate: new Date(),
      defaultDate: new Date(),
    });

    $('.datepicker').datepicker({
      autoclose: true,
      todayHighlight: true,
      format: 'dd-mm-yyyy'
    });
    $('.monthpicker').datepicker({
      autoclose: true,
      todayHighlight: true,
      format: 'mm-yyyy',
      viewMode: "months",
      minViewMode: "months"
    });

    $('input.date-range').daterangepicker({
        //autoUpdateInput: false,
        locale: {
          cancelLabel: 'Clear',
          format: 'DD-MM-YYYY',
          separator: ' : '
        }
      });

    var msg = '';
    var color = '';

    toastr.options = {
        // "closeButton": true,
        "positionClass": "toast-bottom-right",
        "timeOut": "3000",
        "extendedTimeOut": "3000",
      };

      if (msg) {
        switch (color) {
          case 'success':
          toastr.success(msg);
          break;
          case 'info':
          toastr.info(msg);
          break;
          case 'warning':
          toastr.warning(msg);
          break;
          case 'error':
          toastr.error(msg);
          break;
        }
      }

    </script>

    <script>

    </script>

    <script type="text/javascript">

      $(document).ready(function(){
        var aa = '';
        if(aa) alert('Sila cetak Surat Akuan Penerimaan Projek');

        $("#kpi-reminder").fadeIn("slow");
      });


      $('.coordinator_id').change(
        function() {
                    //Get the teamManagement member
                    var that = $(this);
                    $.getJSON( "member/" + $(this).val(), that, function( data ) {
                      var members = "Ahli Kumpulan:";
                      $.each( data, function( key, val ) {
                        members = members + "\n" + key + ". " + val;
                      });

                        // Change tooltip
                        that.siblings('.member').prop('title', members);
                        that.siblings('.member').prop('style', 'white-space: pre-line');
                      });
                  }
                  );
      $('#acceptance_status').change(
        function() {
          if($('#acceptance_status').val() == '90')
          {
            $('#notes').show();
            $('#note').prop('disabled', false);
          }
          else
          {
            $('#notes').hide();
            $('#note').prop('disabled', true);
          }
        }
        );

      $('#btn_edit').click(
        function()
        {
          if($('#btn_edit').val() == "Kemaskini")
          {
            $('#btn_edit').val("Batal");
            $('#file_ref').prop( "disabled", false );
            $('#btn_submit').prop( "disabled", false );
          }
          else
          {
            $('#btn_edit').val("Kemaskini");
            $('#file_ref').prop( "disabled", true );
            $('#btn_submit').prop( "disabled", true );
          }
        }
        );

      $('#submission_status').change(
        function() {
          if($('#submission_status').val() == '2')
          {
            $('#notes').prop( "disabled", true );
            $('#status_notes').hide();
          }
          else
          {
            $('#status_notes').show();
            $('#notes').prop( "disabled", false );
          }
        }
        );

      $('#change_required').change(
        function(){
          if(this.checked)
          {
            $('#submission_status').prop( "disabled", false );
            $('#notes').prop( "disabled", false );
          }
          else
          {
            $('#submission_status').prop( "disabled", true );
            $('#notes').prop( "disabled", true );
          }
        }
        );

      $('#complete_submission_status_id').on('change', function()
      {
        var status = $('#complete_submission_status_id option:selected').val();
        if(status == "4")
        {
          $('.complete').show();
          $('.complete-input').prop('disabled', false);

          $('.incomplete').hide();
          $('.incomplete-input').prop('disabled', true);

                //$('#status-update').prop('disabled', false);
              }
              else if (status == "3")
              {
                $('.complete').hide();
                $('.complete-input').prop('disabled', true);

                $('.incomplete').show();
                $('.incomplete-input').prop('disabled', false);

                $('#status-update').prop('disabled', false);
              }
              else
              {
                $('.complete').hide();
                $('.complete-input').prop('disabled', true);

                $('.incomplete').hide();
                $('.incomplete-input').prop('disabled', true);

                $('#hardcopy_received').prop('checked', false);
                $('#status-update').prop('disabled', true);
              }
            });

      $('#hardcopy_received').on('change', function()
      {
        if(this.checked)
        {
          $('#status-update').prop( "disabled", false );
        }
        else
        {
          $('#status-update').prop( "disabled", true );
        }

      });
    </script>

    <script href="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/locale/bm.js"></script>
    <script>

      function getDob(nric) {
        var nricYear = nric.substr(0, 2);
        var nricMonth = nric.substr(2, 2);
        var nricDay = nric.substr(4, 2);
        var tahun = nricYear < 50 ? '20'+nricYear : '19'+nricYear;
        return nricDay+'-'+nricMonth+'-'+tahun;
      }

      function calcAge(nric) {
        var nricYear = nric.substr(0, 2);
        var tahun = nricYear < 50 ? '20'+nricYear : '19'+nricYear;
        var age = moment().format('YYYY') - tahun;
        return age <= 0 ? 'Kurang 1 Tahun' : age;
      }

      Number.prototype.formatNumber = function (c, d, t) {
        var n = this,
        c = isNaN(c = Math.abs(c)) ? 2 : c,
        d = d == undefined ? "." : d,
        t = t == undefined ? "," : t,
        s = n < 0 ? "-" : "",
        i = String(parseInt(n = Math.abs(Number(n) || 0).toFixed(c))),
        j = (j = i.length) > 3 ? j % 3 : 0;
        return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
      };

      function progressBarShow() {
        $('#progressBar').show();
      }

      function progressBarHide() {
        $('#progressBar').hide();
      }

      function preloaderShow() {
        $('.preloader').show();
      }

      function preloaderHide() {
        $('.preloader').fadeOut();
      }

    </script>
    <div id="suratmaklum" class="modal fade" role="dialog"  aria-hidden="true"  aria-modal="true" aria-labelledby="mynoteModalLabel">
      <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Surat Lampiran Perbaharui/Pindaan</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label for="" class="control-label col-md-4">UPLOAD SURAT PEMAKLUMAN PDF FILE</label>
              <div class="col-md-8">
                <p class="form-control-static" id="full_name"></p>
              </div>
            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" aria-hidden="true" data-dismiss="modal">SUBMIT</button>
          </div>
        </div>
      </div>
    </div>

    <div id="spModal" class="modal fade" role="dialog"  aria-hidden="true"  aria-modal="true" aria-labelledby="mynoteModalLabel">
      <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Surat Lampiran Perbaharui/Pindaan</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label for="" class="control-label col-md-4">SHOW PDF FILE</label>
              <div class="col-md-8">
                <p class="form-control-static" id="full_name"></p>
              </div>
            </div>

          </div>
          <div class="modal-footer">

            <button type="button" class="btn btn-default" aria-hidden="true" data-dismiss="modal">Tutup</button>
          </div>
        </div>
      </div>
    </div>
  </body>

  </html>
